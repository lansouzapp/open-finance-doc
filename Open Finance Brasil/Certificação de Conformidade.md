# Diretrizes Gerais de Certificação de Conformidade

---
id: 280297514
title: Diretrizes Gerais de Certificação de Conformidade
version: 7
modified: 2025-05-02T18:23:11.234Z
url: /spaces/OF/pages/280297514/Diretrizes+Gerais+de+Certifica+o+de+Conformidade
---

# Introdução
Esta página tem como objetivo principal dar as **diretrizes gerais** às instituições sobre como funcionam os processos de certificação de segurança e funcional. É recomendado, após a leitura desta página, um estudo mais aprofundado do Guia de Certificação de Conformidade, contendo informações mais detalhadas e específicas para a execução dos testes e obtenção das certificações. Vale ressaltar que o Guia de Certificação está em contínuo processo de atualização, sendo passível de sofrer alterações. Qualquer dúvida em relação ao processo, fique à vontade para a submissão de tickets através do [Service Desk](https://servicedesk.openfinancebrasil.org.br/Login.jsp?gotoURL=servicePortal&navLanguage=pt-BR).
# Informações Gerais
Para a entrada segura e assertiva no Ecossistema do Open Finance Brasil, a Estrutura de Governança disponibilizou um conjunto de ferramentas e infraestrutura para suportar o processo de testes e homologação dos produtos e serviços desenvolvidos pelas Instituições Participantes. Foram disponibilizados ambientes que habilitam ao participante:
- Realizar testes da camada de segurança de suas aplicações e posterior certificação dessas aplicações, utilizando a estrutura criada e mantida pela OpenID Foundation (OIDF) - “Motor de Conformidade de Segurança”;
- Realizar testes funcionais nas implementações das suas APIs dos produtos do Open Finance Brasil e posterior certificação - “Motor de Conformidade Funcional”).
As certificações são obrigatórias para todos os participantes entrarem em produção em cada fase do Open Finance Brasil, ou seja, uma implementação de versão de API só poderá ser registrada no ambiente produtivo do Diretório caso tenha sido certificada nos testes de segurança e funcionais. Vale ressaltar que as certificações de segurança e funcionais são independentes e seguem políticas de (re)certificação diferentes uma da outra.
# Calendário de Certificação
As datas relevantes e regulatórias de todos os calendários de certificações de APIs, vigentes ou antigas, podem ser encontradas no [Calendário oficial do Open Finance Brasil](https://openfinancebrasil.atlassian.net/wiki/spaces/OF/calendars).
# Certificação de segurança
Para fins de certificação de segurança, os participantes do Open Finance são categorizados em:
- OpenID Provider (OP): transmissores de dados e detentores de conta Demandam certificação FAPI e DCR e, se forem submetidas juntas, serão cobradas como uma única certificação.
- Relying Party (RP): receptores de dados e iniciadores de pagamento Demandam certificação RP; Certificação de segurança Relying Parties (RP) de pagamentos (escopo signed) é válida para compartilhamento de dados (escopo unsigned), mas o contrário não é válido. §  O escopo a ser utilizado é definido no momento da chamada da API. Não existe diferença na parametrização do teste, porém, no momento da execução de cada teste, a ferramenta irá disponibilizar endpoints de accounts e payments e cabe ao receptor/iniciador chamar o endpoint correto conforme o perfil de certificação desejado.
A certificação em cada uma das modalidades citadas acima é obrigatória e possui custos que podem ser consultados no site da OpenID Foundation ou nos Informas do ecossistema.O processamento dos pedidos de certificação é realizado por ordem de submissão. Portanto, recomendamos que o pedido de certificação seja submetido com, pelo menos, 2 meses de antecedência, devido às limitações de capacidade de processamento da OpenID Foundation.
# Certificação Funcional
A certificação de Conformidade Funcional é um mecanismo necessário para garantia de desenvolvimento adequado das APIs por parte dos participantes. Com a obrigação de sucesso completo nos testes do motor de conformidade, essa ferramenta acaba sendo vital para garantia da interoperabilidade e saúde do ecossistema. Vale reforçar que há a obrigatoriedade das instituições implementarem em produção as soluções técnicas testadas e certificadas em sandbox. No caso de atualização da implementação, a instituição deverá solicitar uma nova certificação para garantir a adesão aos padrões do Open Finance.O período entre o lançamento da beta1 das especificações de um produto do Open Finance e a entrada em produção (go live) é dividido entre o período de maturidade e o período de certificação. Durante o período de maturidade, é esperado que as instituições desenvolvam suas APIs e executem os testes disponíveis com objetivo de garantir a maturidade das especificações, dos testes e das implementações das instituições, visando a interoperabilidade em produção. Sendo assim, para cada lançamento são estabelecidos “marcos de sucesso” que as instituições precisam cumprir em cada data, que vinculam uma quantidade de testes que a instituição precisa obter sucesso como evidência de seu desenvolvimento. É importante ressaltar que este resultado deve ser atingido no motor de conformidade funcional hospedado pelo Open Finance Brasil, logo testes executados localmente não são válidos para pedido de certificação.Utilizando-se do motor de conformidade funcional, o participante deverá atingir a marca de 100% de sucesso nos testes na sua versão final antes do pedido de certificação. Com esta marca de sucesso, o participante deve então seguir o fluxo de certificação, que possui quatro tipos.**Tipos de certificação funcional**
1. Certificação completa
Essa é a certificação padrão do Open Finance. Nesse modelo, o pedido de certificação deverá ser submetido através de um ticket no service desk na categoria (XPTO), anexando os resultados públicos dos testes (um exemplo pode ser acessado em: [https://web.conformance.directory.openbankingbrasil.org.br/log-](https://web.conformance.directory.openbankingbrasil.org.br/log-detail.html?log=yxaJTHHQjF4to64&public=true) [detail.html?log=yxaJTHHQjF4to64&public=true](https://web.conformance.directory.openbankingbrasil.org.br/log-detail.html?log=yxaJTHHQjF4to64&public=true)), que será processado pela Estrutura. Após a aprovação, será gerado um link com os documentos utilizados na certificação. Este é o link que deverá ser incluído no Diretório no momento da publicação/atualização dos endpoints das APIs no ambiente de produção do Open Finance Brasil.O processamento dos pedidos de certificação possui uma automação, portanto, caso tenha alguma dúvida do resultado nós recomendamos a abertura de um novo ticket.O Guia de submissão de pedidos de certificação (em inglês) está disponível nesse link e o Guia do Diretório, com orientações para a publicação, está disponível nesse link.
1. Certificação simplificada
Esse modelo de certificação costuma ser adotado para mudanças minor nas APIs e, quando for aplicável, essa informação será comunicada para as instituições com antecedência.Nesse caso, após a instituição passar em 100% dos testes, ela já poderá atualizar o seu ambiente produtivo, desde que respeitando a data de *go live*. Reforçamos que os testes com sucesso devem estar na sua última versão e os resultados devem estar públicos, conforme orientações do item 3.2.3.Em casos de alteração de comportamentos isolados, que não impactem a estrutura das APIs, a Estrutura poderá exigir apenas a execução de um conjunto específico dos testes.Para certificação simplificada não é necessário abrir ticket no Service Desk e enviar *logs*.
1. Certificação automática
A certificação para as APIs de Dados Abertos ocorre de maneira automática, ou seja, os testes são executados automaticamente **no momento da publicação da API no Diretório de Produção**. Caso a API esteja conforme, a publicação será feita com sucesso. Caso algum problema seja encontrado, a instituição responsável pela publicação será notificada através de uma mensagem de erro no próprio Diretório, indicando o plano de testes que obteve falha, e a publicação não será efetivada.Portanto, não é necessário realizar pedidos de certificação através de tickets no Service Desk, dado que este ocorre automaticamente. Após a publicação da API no Diretório produtivo, uma automação reexecuta os testes de Dados Abertos semanalmente, como parte da rotina da FVP.  Caso a instituição não obtenha sucesso na execução do teste, o status da certificação mudará de “Self-Certified” para “Rejected”.  Assim que uma nova execução seja realizada com sucesso, o status voltará para “Self-Certified”. No cenário de falha em uma rotina automática semanal, a própria instituição poderá reexecutar o teste manualmente, antes da próxima execução automática, a fim de regularizar o status para “Self-Certified”, em caso de sucesso, com maior brevidade. Para que um novo teste seja executado, o usuário da instituição deve: 
1. Localizar a respectiva API no diretório.
2. Clicar em “Editar ”.
3. Alterar o status para “Self-Certified”.
4. Salvar.
Se o teste for bem-sucedido, o status será atualizado para “Self-Certified”. 
1. Não certificação
Para casos em que a atualização da API não exija atualizações técnicas relevantes das instituições (ex: alguma regra se tornará menos restritiva para permitir a entrada de algum participante, mas as instituições que já estão em pleno funcionamento não precisarão fazer ajustes), a Estrutura poderá optar por não exigir nenhuma certificação. Nesse caso, a instituição deverá apenas atualizar a versão da API no Diretório dentro do cronograma acordado.Caso a instituição tenha dúvidas, comentários, sugestões ou encontre algum bug, um ticket deve ser aberto para a estrutura no Gitlab ou no Service Desk.Seguem alguns links úteis relacionados ao motor de conformidade:
- Acesso ao Motor de Conformidade Funcional, que é a ferramenta para execução dos testes de conformidade funcional
- Release notes do motor de conformidade funcional é uma página de nosso fornecedor contendo as principais informações relativas ao motor, separada para cada uma das APIs. Na página de release notes ¸ após seleção da API específica para detalhamento no menu lateral, podem ser encontradas informações atualizadas relativas à: Release Dates : Especificação das datas de lançamentos do motor de testes funcional, disponibilização dos novos módulos e versão da especificação utilizada de base para a criação dos testes; Breaking Changes : São mudanças relevantes no motor de conformidade, tornando um ou mais módulos mais restritivos do que a sua versão anterior, ocorrendo devido a bugs encontrados no motor de conformidade. Assim sendo, módulos de teste impactados por Breaking Changes devem obter sucesso apenas a partir da data da alteração relevante no motor. Portanto, torna-se necessária a divulgação e a documentação de módulos impactados, bem como a data da alteração relevante no motor de conformidade; Lista completa de testes : Disponível na seção “Test Plan List”, a lista contempla todos os testes disponíveis no motor, junto com o seu detalhamento do que será testado nele.
- Issues do motor de conformidade funcional é uma página destinada à interação dos participantes com o fornecedor, com o objetivo de tirar dúvidas, comunicar e dar visibilidade aos problemas encontrados no motor. Incentivamos os participantes a utilizarem essa plataforma, seja abrindo tickets para eventuais dúvidas, problemas ou divergências encontradas no motor de conformidade funcional. Essa plataforma permite o acompanhamento e interação com dúvidas de outras instituições e dá visibilidade para itens que já estão em correção ou que já foram esclarecidos.
- Dashboard de Acompanhamento para acompanhar o status de execução dos testes e habilitar a visualização de maturidade do motor de conformidade e evitar eventuais transtornos próximos à data de Go-live , pois o respeito aos marcos de certificação é fundamental e obrigatório.
Para melhor acompanhamento da evolução da sua instituição com relação aos marcos de conformidade, é possível solicitar acesso ao Dashboard de Acompanhamento de Conformidade, com detalhamento do processo de pedido de acesso descrito no [Informe #431](https://mailchi.mp/ca867f20a701/open-banking-informa-9389280?e=2eb7798bd9). No dashboard de acompanhamento, é possível analisar dados como, por exemplo, testes já com sucesso da sua instituição e módulos executados.Vale ressaltar que, para validar o atendimento dos marcos, alguns filtros podem ser aplicados como a data da última *breaking change*.**Outras certificações**Além das certificações de segurança e funcional, outras certificações poderão ser exigidas a depender do produto e da solução técnica.Para a implementação de pagamentos via Jornada Sem Redirecionamento (JSR), é necessário que as instituições detentoras utilizem um servidor FIDO certificado, podendo optar por utilizar um servidor FIDO que já foi certificado (próprio ou de terceiro) ou realizar a certificação do próprio servidor junto à FIDO Alliance, instituição responsável pelo processo e calendário dessa certificação.
# Outros Links Úteis

- Guia de Certificação de Conformidade : Página contendo informações mais detalhadas e específicas para a execução dos testes e obtenção das certificações;
- Service Desk : Canal para envio de dúvidas das instituições e envio de notificações pela Estrutura;
- Repositório de Informes : Consolidado dos comunicados enviados ao ecossistema;
- Canal do Youtube do Open Finance Brasil : Link para o canal do Youtube com workshops de lançamentos das APIs, contendo detalhamentos e explicações sob diferentes pontos de vista, como de produto, técnico, experiência do usuário (UX) e conformidade (testes e certificação).
- Certificação FIDO : Orientações para obter a certificação FIDO, obrigatória para as detentoras na Jornada sem Redirecionamento.

---

# Diretrizes Técnicas de Certificação de Conformidade

---
id: 17378905
title: Diretrizes Técnicas de Certificação de Conformidade
version: 8
modified: 2023-08-10T18:07:46.402Z
url: /spaces/OF/pages/17378905/Diretrizes+T+cnicas+de+Certifica+o+de+Conformidade
---

Para a entrada segura e assertiva no Ecossistema do Open Finance Brasil, a Estrutura de Governança disponibilizou um conjunto de ferramentas e infraestrutura para suportar o processo de testes e homologação dos produtos e serviços desenvolvidos pelas Instituições Participantes. Foram disponibilizados ambientes que habilitam ao participante:
- Realizar testes da camada de segurança de suas aplicações e posterior certificação dessas aplicações, utilizando a estrutura criada e mantida pela Open ID Foundation (“Motor de Conformidade de Segurança”);
- Submeter, ainda em tempo de desenvolvimento, suas implementações das APIs do Open Finance Brasil a testes automatizados funcionais (“Motor de Conformidade Funcional”).
Lembramos que uma implementação de versão de API do Open Finance Brasil só poderá ser registrada no ambiente produtivo do Diretório caso tenha sido certificada nos testes de segurança e funcionais.Todos os detalhes para a execução dos testes e obtenção dos certificados podem ser encontrados no Guia de Certificação de Conformidade e no material sobre [Orientações para Certificação](https://openfinancebrasil.atlassian.net/wiki/download/attachments/17378905/20230124_Orienta%C3%A7%C3%B5es%20sobre%20certifica%C3%A7%C3%B5es.pptx?api=v2). Ambos os materiais estão em processo contínuo de atualização, podendo sofrer alterações. Qualquer dúvida em relação ao processo, fique à vontade para a submissão de tickets através do [Service Desk](https://servicedesk.openbankingbrasil.org.br/servicePortal).
## Materiais complementares

1. Certificação funcional Guia de submissão de certificação Guia de certificação Solicitação: https://servicedesk.openbankingbrasil.org.br/Login.jsp Abertura de chamados: https://gitlab.com/obb1/certification/-/issues/ Guia de utilização do Pix Tester: https://openfinancebrasil.atlassian.net/wiki/download/attachments/17378905/20220106_Guia de utilizacao Pix Tester para certificacao funcional.pdf?api=v2
2. Certificação de segurança, OP Documentação:  https://openid.net/certification/op_submission/#:~:text=of%20Conformance%20(docx)-,(PDF),-naming%20that%20profile Termos: https://openid.net/certification/op_submission/#:~:text=Certification%20Terms%20and%20Conditions Solicitação: https://openid.atlassian.net/servicedesk/customer/portal/3/group/3/create/10016 Abertura de chamados: https://gitlab.com/openid/conformance-suite/-/issues
3. Certificação de segurança, RP Documentação: https://openid.net/certification/fapi_rp_submission/#:~:text=of%20Conformance%20(docx)%20(-,PDF,-)%20naming%20that%20profile Termos:   https://openid.net/certification/fapi_rp_submission/#:~:text=Certification%20Terms%20and%20Conditions Solicitação: https://openid.atlassian.net/servicedesk/customer/portal/3/group/3/create/10016 Abertura de chamados: https://gitlab.com/openid/conformance-suite/-/issues
 
## Workshops
Para demonstração dos motores de testes de conformidade funcional e de segurança foram realizados os seguintes workshops:
- 1° Workshop com OpenID Foundation (17/05/2021)
- 2° Workshop com OpenID Foundation (24/05/2021)
- 3° Workshop com OpenID Foundation - Motor de certificação de segurança
- 1° Workshop ferramenta de certificação funcional (15/06/2021)
- Workshop Ferramenta de Certificação OIDF – FAPI Brasil e DCR - Fase 3 (03/08/2021)
- Workshop Ferramenta de Certificação OIDF – FAPI Brasil e DCR - Fase 3 (03/08/2021) (PT-BR)
- Workshop de certificação de conformidade funcional da Fase 3 (27/10/2021)

---

# FAQ - Testes e Homologação

---
id: 17378989
title: FAQ - Testes e Homologação
version: 6
modified: 2023-09-12T17:57:16.341Z
url: /spaces/OF/pages/17378989/FAQ+-+Testes+e+Homologa+o
---

## 1. Quais certificações uma instituição precisa para entrar em produção?
Detentoras e transmissores de dados é necessário certificação funcional e de segurança, iniciadoras e receptoras é necessária certificação de segurança. Maiores informações sobre as certificações obrigatórias para cada modalidade estão disponíveis no documento “Orientações para certificação”, disponível em no link conforme item 21 desta FAQ.
## 2. Quando eu preciso obter as certificações funcionais e de segurança?
Novos entrantes: 
- Para entrada em produção de todas as APIs.
- Certificações funcionais e de segurança: Devem seguir as datas de acordo com sua participação no arranjo ou de adesão ao compartilhamento de dados.  Por exemplo, uma instituição que entre em operação restrita no Pix, possui 10 dias para entrar em produção pelo Open Finance, já com todas as certificações necessárias.
Participantes atuais: 
- Certificações funcionais: Devem seguir as datas de go live do versionamento das APIs.
- Certificações de segurança: Via de regra, a certificação terá duração de 12 meses. As instruções e exceções estão disponíveis na política de renovação, conforme item 18 desta FAQ.

## 3. O que é a OIDF?
OpenID Foundation é uma organização sem fins lucrativos que promove tecnologias OpenID. No Open Finance, eles são os fornecedores das certificações de segurança.
## 4. O que é OP e RP, que aparecem nos nomes das certificações de segurança?
OP: OpenID Providers (detentoras e transmissoras)RP: Relying Parties (receptoras e iniciadoras)
## 5. O que é CIBA e qual a exigência?
CIBA significa Client Initiated Backchannel Authentication.A oferta de CIBA é opcional, porém, para todas as instituições que desejem disponibilizar essa modalidade, a certificação de CIBA da OIDF será obrigatória.
## 6. O que é a FVP e como ela funciona?
FVP significa Ferramenta de Validação em Produção. É uma ferramenta desenvolvida pelo ecossistema que executa parte dos testes de segurança e funcionais em ambiente produtivo.A ferramenta busca averiguar se o comportamento das instituições se mantém consistente com as certificações e se os cadastros em produção estão feitos da maneira correta.Maiores informações estão disponíveis em: [https://gitlab.com/obb1/certification/-/wikis/Automated-Production-Tests](https://gitlab.com/obb1/certification/-/wikis/Automated-Production-Tests) 
## 7. As variações DCR e FAPI OP estão incluídas na taxa que cada instituição vai pagar para a certificação FAPI ?
FAPI OP, DCR e suas variações (private key e MTLS, com ou sem JARM) estarão inclusos na taxa de certificação paga     pela instituição, desde que as submissões sejam feitas juntas.FAPI-CIBA e RP, não estão contempladas nas certificações acima, devendo ser pagas taxas adicionais para cada uma dessas  certificações.
## 8. Posso certificar diversos authorisation servers com uma única certificação?
Pela política do Open Finance a certificação deverá ser realizada em todas as implementações únicas, devendo a instituição garantir mesma tecnologia e configuração para todos os authorisation servers contemplados.Conforme orientação da OIDF, entende-se por implementação única: “cada issuer presente no endpoint well-know do authorisation server". Dessa forma, a certificação deveria ser realizada ao nível do issuer no authorisation server, logo múltiplos servidores de autorização que compartilhem o mesmo issuer poderiam estar englobados numa só certificação.
## 9. Para diferentes marcas, posso realizar uma única certificação funcional para a mesma API?
Pela política do Open Finance a certificação deverá ser realizada em todas as implementações únicas, devendo a instituição garantir mesma tecnologia e configuração para a API certificada.A única hipótese de se utilizar a mesma certificação funcional para mais de uma marca, é no caso destas marcas compartilharem a mesma infraestrutura.
## 10. Utilizo um provedor terceiro que já possui certificação funcional e/ou de segurança, preciso me “recertificar”?
A certificação deverá ser realizada ao nível do conglomerado prudencial, confederação ou instituição, sendo obrigatória a certificação independente da utilização de um provedor externo que já possua certificação.
## 11. É necessário se certificar na plataforma da OIDF para utilizar o motor de conformidade funcional?
A instituição precisará ter passado com sucesso no motor de segurança para executar o motor de conformidade funcional.
## 12. Como é feito o pagamento das certificações OIDF pelas instituições?
O pagamento deve ser realizado de acordo com orientações do Guia de Certificação, disponível no link conforme item 22 desta FAQ.
## 13. Instituições poderão aderir à OIDF como membro e pagar a taxa reduzida na certificação de segurança?
Sim, qualquer instituição que queira e consiga se associar como membro poderá realizar o pagamento da taxa reduzida na certificação de segurança de acordo com as políticas da OIDF.Além disso, há condições especiais para renovações de certificações FAPI-OP e DCR com valor reduzido para solicitações feitas com antecedência. Maiores detalhes estão disponíveis no [Guia de Certificação, disponível no link conforme item 22 desta FAQ.](https://openfinancebrasil.atlassian.net/wiki/download/attachments/17378905/20220912_OpenFinance-Guia_Motor_De_Conformidade_V7.pdf?api=v2)
## 14. Existirá algum custo para realização da certificação funcional?
 Não há custos para realização da certificação funcional.
## 15. Qual o ambiente deve ser utilizado para certificação?
Para qualquer certificação, deve ser utilizado o ambiente de testes da instituição e do Diretório (sandbox).Validações em ambiente produtivo são realizados pela Ferramenta de Validação em Produção (FVP).
## 16. Como acesso o Sandbox do diretório de participantes?
O acesso pode ser realizado pelos administradores da instituição no ambiente de sandbox do Diretório de Participantes. [https://web.sandbox.directory.openbankingbrasil.org.br/](https://web.sandbox.directory.openbankingbrasil.org.br/) Os ambientes de produção e de sandbox do Diretório são desvinculados e ser administrador em um não confere poder de administrador no outro.A adição de administradores pode ser realizada por qualquer administrador atual da instituição em sandbox, seguindo o  passo a passo para cadastro , que pode ser encontrado em:  Guia de Operação do Diretório Central 
## 17. Como  acesso o motor de conformidade segurança da OIDF?
O acesso a plataforma da OIDF é livre para todo o público.O Motor de conformidade de segurança está disponível em: [https://www.certification.openid.net/](https://www.certification.openid.net/)
## 18. Como  acesso o motor de conformidade funcional do Open Finance Brasil?
O Acesso ao motor de conformidade funcional só poderá ser realizado pelos contatos técnicos e administradores das instituições cadastrados no diretório de participantes de sandbox.O Motor de conformidade funcional, está disponível em: [https://web.conformance.directory.openbankingbrasil.org.br](https://web.conformance.directory.openbankingbrasil.org.br/)
## 19. Qual o critério para uma instituição fazer a certificação novamente? Depois de uma  major/minor/periodicidade trimestral?
Os critérios de expiração de certificação funcional e de segurança estão explicados no [Guia de Certificação](https://bra01.safelinks.protection.outlook.com/GetUrlReputation).
## 20. Será possível integrar os testes funcionais e de segurança com o pipeline de DevOps das instituições?
Os testes funcionais e de segurança são fornecidos em formato de código aberto, podendo a instituição implementar esses testes no ambiente da instituição. Vale notar que não está previsto suporte para que seja realizada essa integração e que, para fins de certificação, deverão ser utilizados logs de testes realizados no próprio motor de conformidade (versão web). 
## 21. Uma instituição pode fazer testes usando endpoints públicos de outra instituição?
Testes entre instituições não estão no escopo da plataforma de certificação, mas as instituições podem combinar testes de integração entre si no ambiente de sandbox.
## 22. Onde posso encontrar o documento “Orientações para certificação”?
O documento está disponível em: [Orientações para Certificação](https://openfinancebrasil.atlassian.net/wiki/download/attachments/17378905/20230124_Orienta%C3%A7%C3%B5es%20sobre%20certifica%C3%A7%C3%B5es.pptx?api=v2)
## 23. Como posso acessar o Guia de Conformidade?
O Guia de Conformidade está disponível em: [https://openfinancebrasil.atlassian.net/wiki/download/attachments/17378905/20220912_OpenFinance-Guia_Motor_De_Conformidade_V7.pdf?api=v2](https://openfinancebrasil.atlassian.net/wiki/download/attachments/17378905/20220912_OpenFinance-Guia_Motor_De_Conformidade_V7.pdf?api=v2)
## 24. Em qual versão preciso executar os testes para obter a certificação?
Para obter a certificação, é imprescindível realizar a execução dos testes na última versão estável do motor de conformidade, garantindo que eventuais novos requisitos e padrões necessários estejam sendo atendidos de forma consistente e confiável pelas instituições. A versão estável do motor será comunicada por Informa na abertura da certificação.
## 25. Como poderei enviar dúvidas adicionais?
Todas as dúvidas deverão ser enviadas para o service desk do Open Finance, acessível através do link:  [https://servicedesk.openfinancebrasil.org.br](https://servicedesk.openfinancebrasil.org.br/)

---

# Guia de Certificação de Conformidade

---
id: 155910145
title: Guia de Certificação de Conformidade
version: 3
modified: 2024-08-14T14:12:02.395Z
url: /spaces/OF/pages/155910145/Guia+de+Certifica+o+de+Conformidade
---

# 1. Introdução
O Open Finance ou Sistema Financeiro Aberto é uma iniciativa do Banco Central do Brasil que tem como principais objetivos trazer inovação ao sistema financeiro, promover a concorrência, e melhorar a oferta de produtos e serviços financeiros ao consumidor final. Este guia visa auxiliar os profissionais envolvidos no negócio e no desenvolvimento desse serviço, facilitando e esclarecendo dúvidas relacionadas ao processo de teste e certificação de suas APIs. Clique [aqui](https://openbankingbrasil.org.br/) para uma visão completa do Open Finance Brasil.O objetivo deste guia é demonstrar de forma prática a execução dos testes necessários para obtenção das certificações pertinentes para a entrada em produção no ecossistema do Open Finance Brasil. Esse guia é complementar a outras documentações disponibilizadas pela governança e não fazem parte do escopo deste, quaisquer detalhamentos relacionados a experiencia do usuário/desenvolvedor, definições de segurança e especificação de APIs.**Observações**: Estão previstos versionamentos contínuos deste guia ao longo dos primeiros meses de implementação do Open Finance no Brasil. O escopo inicial deste guia é a orientação de uso da ferramenta provida pela **Open ID Foundation (OIDF)**(“Motor de Conformidade de Segurança”) para teste e certificação do escopo de segurança e da ferramenta disponibilizada pela Estrutura de Governança para teste e certificação de conformidade de APIs (“Motor de Conformidade Funcional”), enquanto as instruções para uso da Implementação de Referência (“Mock Bank”) serão disponibilizadas em uma versão futura desse guia.
## 1.1. Objetivos e Conceitos Gerais
Para a entrada segura e assertiva no Ecossistema do Open Finance, a Estrutura de Governança irá disponibilizar um conjunto de ferramentas e infraestrutura para suportar o processo de testes e homologação dos produtos e serviços desenvolvidos pelas Instituições Participantes.Serão disponibilizados ambientes que permitam aos participantes:
- Realizar testes da camada de segurança de suas aplicações e posterior certificação destas aplicações utilizando a estrutura criada e mantida pela OpenID Foundation (“Motor de Conformidade de Segurança”);
- Submeter, ainda em tempo de desenvolvimento, suas implementações das APIs do Open Finance a testes automatizados funcionais (“Motor de Conformidade Funcional”); e,
- Acessar implementações de exemplo das APIs do Open Finance que simule uma Instituição Participante de Referência, com implementação completa de cada API (“Implementação de Referência”).
Uma implementação de versão de API do Open Finance só poderá ser registrada no ambiente produtivo do Diretório caso tenha sido certificada nos testes de segurança e conformidade, cujo detalhamento para execução será apresentado nesse guia.
## 1.2. Escopo
Para garantir que as implementações das instituições estão seguindo os padrões conforme as especificações previstas para o Open Banking Brasil, o escopo mínimo dos testes irá abranger aspectos de segurança e também aspectos funcionais: os primeiros objetivarão avaliar se os requisitos não funcionais das APIs, em particular, segurança, estão sendo atendidos por suas implementações, enquanto que os últimos visarão avaliar se as implementações estão aderentes às [especificações](https://openbankingbrasil.atlassian.net/wiki/spaces/OB/pages/8683521/Especifica%2Bes%2Bde%2BAPIs) das APIs do ambiente.Dentro do escopo previsto pelos motores de conformidade, destacamos, de maneira não exaustiva, as principais validações executadas:
- Segurança Perfil FAPI BR DCR – Dynamic Client Registration Perfil FAPI BR Relying Parties Perfil DCR BR Relying Parties – A ser detalhado em versão posterior do guia Perfil CIBA BR - A ser detalhado em versão posterior do guia
- Funcionais Estrutura das URLs Cabeçalhos Códigos de Resposta Escopos e Permissões Schema / Estrutura da API

## Ferramentas

- Motor de Conformidade de Segurança / Testes de Segurança / – Foco da versão atual deste Guia
Ferramenta disponibilizada pela **Open ID Foundation**que implementa o perfil de segurança do Open Finance Brasil. Através desta plataforma é possível a validação de toda camada de segurança das aplicações da Instituição Participante.
- Motor de Conformidade Funcional / Testes de Conformidade / ‘Conformance Suite’ – Foco da versão atual deste Guia
Ferramenta disponibilizada pela Estrutura de Governança para realização de testes de conformidade de especificações de API da Instituição Participante.
- Implementação de Referência / Banco de referência / Banco Modelo / ‘Mock Bank’ – Não detalhado nessa versão do Guia
Implementação de exemplo das APIs do Open Finance Brasil, simulando uma Instituição Participante de Referência
# Políticas Gerais

## 2.1. Participantes
A governança do Open Finance Brasil convencionou que todos os participantes, para publicarem suas APIs para o ecossistema (“Transmissores” ou “Detentores de Conta”), devem possuir as devidas certificações que seus sistemas estão seguindo os padrões criados. Estas certificações estão divididas em certificações de segurança e certificações funcionais.As certificações de segurança englobam dois aspectos: O perfil FAPI e o processo de DCR. A certificação de segurança é obrigatória para os participantes que publicarão suas APIs no ecossistema e não há distinção de fases para esta certificação, ou seja, o certificado de segurança cobre as APIs de todas as fases.Já para a certificação funcional, é necessário ser feita englobando cada grupo de API que se deseja publicar no ecossistema. Atualmente, tem-se as seguintes APIs:
- Fase 2: Consentimento, Dados Cadastrais (PF), Dados Cadastrais (PJ), Recursos, Contas, Cartão de Crédito, Operações de Crédito - Empréstimos, Operações de Crédito - Financiamentos, Operações de Crédito - Adiantamento a Depositantes e Operações de Crédito - Direitos Creditórios Descontados;
- Fase 3: Pagamentos
Para as instituições que participarão no ecossistema realizando o consumo de dados (Receptores) ou como iniciadores de pagamento (Iniciadores de Transação de Pagamento), temos um procedimento diferente: É necessário realizar uma certificação de segurança específica, focada no perfil chamado de ‘*relying party’*(RP). Atualmente, esta certificação de segurança está dividida:
- Fase 2 (Receptores): A certificação engloba os módulos FAPI e DCR e é obrigatória para todos que desejam atuar como receptores de dados;
- Fase 3 (Iniciadores de Transação de Pagamento): A certificação de relying party , que engloba os módulos FAPI e DCR, obrigatória para todos que desejam realizar a iniciação de pagamento.
A certificação RP para a Fase 3 (Iniciadores de Transação de Pagamento) é válida também para a Fase 2 (Receptores), mas o inverso não é verdadeiro.É importante ressaltar que uma vez que a instituição realize suas certificações, ela passa a ter que seguir a convenção estabelecida, incluindo: Processos de recertificações, cronogramas para novos certificados, atualizações de APIs entre outros.
## 2.2. Objeto de certificação

### 2.2.1. Ambiente Prod vs. Pré-Prod
Ambas as certificações funcionais e de segurança poderão ser realizadas em ambiente produtivo ou pré-produtivo (homologação), ficando a cargo do participante a escolha.Caso se opte pelo uso de uma ambiente pré-produtivo, este deverá ser um espelho do ambiente de produção, possuindo a mesma arquitetura, elementos de rede e versões de software existentes em produção.Após a realização dos testes, todos os dados utilizados, incluindo chaves públicas e privadas dos certificados e os dados do cliente do teste serão disponibilizados no ecossistema, ficando visível aos demais participantes do ecossistema e passíveis de auditoria. Desta forma, caso a instituição opte por realizar a certificação em ambiente produtivo, ela deve estar ciente e é responsável por revogar os certificados utilizados durante os testes e da necessidade da obtenção do consentimento dos clientes.
### 2.2.2. Certificações para entrada no Open Finance
As instituições deverão obter as certificações abaixo:
| Tipo | Nome | Obrigatoriedade | Custo | Emissor |
| Segurança - FAPI | BR-OF Adv. OP w/ Private Key, PAR (FAPI-BR v2) | Transmissoras de dados e detentoras de conta | Sim¹ | OIDF |
| Segurança - FAPI | BR-OF Adv. OP DCR (FAPI-BR v2) | Transmissoras de dados e detentoras de conta | Sim¹ | OIDF |
| Funcional | Conformidade funcional | Para todas as transmissoras de dados e detentoras de conta – necessário para todas as APIs | Não | OFB |
| Segurança - FIDO | Certificação FIDO Server | Para detentoras de conta que implementem Jornada sem Redirecionamento | Sim² | FIDOAlliance |
| Segurança - FAPI | [Accounts] BR-OF Adv. RP w/ Private Key, PAR (FAPI-BR v2)  Ou [Payments] BR-OF Adv. RP w/ Private Key, PAR (FAPI-BR v2) | Receptoras de dados | Sim | OIDF |
| Segurança - FAPI | [Payments] BR-OF Adv. RP w/ Private Key, PAR (FAPI-BR v2) | Iniciadoras de pagamento | Sim | OIDF |
1 Se a submissão dos pedidos de certificação FAPI e DCR forem realizadas em conjunto, será necessário o pagamento de apenas uma certificação2 Se a instituição já utiliza alguma solução que possua o FIDO Server certificado (implementação própria ou implementação de mercado), não é necessário obter outra certificação
## 2.3.Prazos
Para go-live das APIs em ambiente produtivo é mandatório que todas as certificações de segurança e funcionais tenham sido emitidas e devidamente publicadas no Diretório Central. Instruções para o procedimento podem ser obtidas em: [https://openbankingbrasil.atlassian.net/wiki/spaces/OB/pages/9634736/Guia+de+Opera+o+do+Dire](https://openbankingbrasil.atlassian.net/wiki/spaces/OB/pages/9634736/Guia%2Bde%2BOpera%2Bo%2Bdo%2BDiret%2Brio%2BCentral) [t+rio+Central](https://openbankingbrasil.atlassian.net/wiki/spaces/OB/pages/9634736/Guia%2Bde%2BOpera%2Bo%2Bdo%2BDiret%2Brio%2BCentral)
### 2.3.3. Validade/Recertificação

#### 2.3.3.1. Política de expiração de certificações de segurança emitidas pela OpenID Foundation (FAPI, DCR e RP)
As regras descritas na política abaixo são válidas para todas as certificações de segurança emitidas pela OpenID Foundation (OIDF) no contexto do Open Finance (FAPI, DCR, RP e, futuramente, CIBA).
### Validade

- Serão necessárias recertificações quando houver: Exigência da Estrutura do Open Finance motivada por mudança de versão de documentações OIDF ou no FAPI-BR, independente do tempo desde a última certificação As mudanças na documentação serão analisadas pela Estrutura do Open Finance e a necessidade de recertificação será comunicada para as instituições Alteração de tecnologia e/ou infraestrutura de produção utilizada pela instituição, independente do tempo desde a última certificação: Plataforma de hospedagem (Ex.: AWS, Azure, Google); Tecnologias de plataforma OFB (Ex.: mudança de solução de mercado para desenvolvimento interno); A certificação anterior completar 12 meses desde a data de submissão.

### Submissão

- O pedido de certificação deve ser submetido e pago até a data de expiração e todo o processo deve ser concluído em até 60 dias após a data de expiração.
- A cobrança da certificação é realizada por submissão, portanto, no momento da nova submissão, recomendamos que seja submetido o pedido de FAPI (private key, MTLS, PAR) e DCR juntos.
Exceção para certificações FAPI e DCR emitidas até 27/06/2022Para as certificações FAPI e DCR emitidas até 27/06/2022, em caráter de exceção, será considerado o prazo de expiração mais longo dentre as duas.Exemplo: Instituição com
- Certificações realizadas: § FAPI em 15/06/2021, § DCR em 30/11/2021 e § RP em 15/12/2021
- Prazo para obter nova certificação: § FAPI e DCR até 30/11/2022 § RP até 15/12/2022.
O prazo de expiração no Diretório (campo “expiration date of certification”) não será atualizado conforme a exceção, mas pedimos que as instituições considerem as políticas aqui informadas.
### Pagamento via Chicago Advisory
Foi definido que o pagamento de certificações OIDF poderá ser intermediado, em caso de exceção, pela Chicago.Nesse caso, no momento da nova submissão, selecionar a opção "Pagamento intermediado pela Chicago" no formulário de submissão de certificação no site da OIDF e enviar um e-mail ao [financeiro@chicagoadvisory.com.br](mailto:financeiro@chicagoadvisory.com.br) com as seguintes informações:
- Solicitação da instituição contendo o motivo para consideração de exceção
- Invoice contendo o valor da certificação e dados bancários do fornecedor (OIDF)
A Chicago analisará o pleito e tendo aprovação, enviará:
- Nota de débito e o boleto para pagamento da instituição, além de demonstrativo do cálculo incluindo impostos
- A cotação do dólar (base no dia da nota de débito)
- Informação sobre prazo para pagamento (até 20 dias)
Após identificação do recebimento do pagamento pela instituição, será realizado o pagamento para a OIDF através da ChicagoCaso haja diferença de cotação no fechamento do câmbio, será realizada devolução à instituição ou enviada nota de débito ou boleto complementar para pagamento da diferença.Informações sobre quais certificações são necessárias e o valor a ser pago à OIDF devem ser obtidas no documento de Orientações à certificação, através de tickets no service desk ou discutidos diretamente com a OIDF, estando a Chicago disponível apenas para apoiar na operacionalização do pagamento.Para evitar a necessidade de intermediação da Chicago em um procedimento que ocorrerá com base no mínimo anual e que é uma exceção ao Regulamento de Contratações, pedimos que as instituições que possuem dificuldades internas para realizar o pagamento diretamente para a OpenID, como cadastro de fornecedor estrangeiro, regularizem esse processo o mais breve possível.Maiores informações sobre certificações: [https://openbankingbrasil.atlassian.net/wiki/spaces/OB/pages/1738043/Diretrizes+T+cnicas+de+Ce](https://openbankingbrasil.atlassian.net/wiki/spaces/OB/pages/1738043/Diretrizes%2BT%2Bcnicas%2Bde%2BCertifica%2Bo%2Bde%2BConformidade) [rtifica+o+de+Conformidade](https://openbankingbrasil.atlassian.net/wiki/spaces/OB/pages/1738043/Diretrizes%2BT%2Bcnicas%2Bde%2BCertifica%2Bo%2Bde%2BConformidade)Maiores informações sobre certificações: [https://openbankingbrasil.atlassian.net/wiki/spaces/OB/pages/1738043/Diretrizes+T+cnicas+de+Ce](https://openbankingbrasil.atlassian.net/wiki/spaces/OB/pages/1738043/Diretrizes%2BT%2Bcnicas%2Bde%2BCertifica%2Bo%2Bde%2BConformidade) [rtifica+o+de+Conformidade](https://openbankingbrasil.atlassian.net/wiki/spaces/OB/pages/1738043/Diretrizes%2BT%2Bcnicas%2Bde%2BCertifica%2Bo%2Bde%2BConformidade)Maiores informações sobre OpenID Foundation - [https://openid.net/certification/](https://openid.net/certification/) 
#### 2.3.3.2. Política de expiração de certificações funcionais
As certificações funcionais possuem uma validade determinada e a recertificação deverá acontecer nas seguintes situações:
- Vencimento da validade do certificado (a definir);
- Nova versão da API Neste caso deve-se seguir os prazos a serem definidos e comunicados pelo comitê de versionamento.
- Mudanças internas na arquitetura da instituição, com troca de sistemas/soluções que atendem a entrega da API Neste caso cabe a instituição avaliar a necessidade de uma recertificação.
- Sempre que o ecossistema julgar necessário, neste caso serão comunicados os motivos, quais certificações precisarão ser refeitas e prazo.

## 2.4. Custos

### 2.4.1. Certificações
A certificação de segurança FAPI Brasil 1.0 das instituições financeiras participantes do Open Finance Brasil será realizada pela OpenID Foundation.Conforme consta em sua página oficial, os custos de cada certificado possuem valores tabelados, possuem diferenciação para membros e não membros, e são pagos diretamente à OpenID Foundation. A tabela de preços da certificação FAPI estão disponíveis em: [https://openid.net/certification/fees/.](https://openid.net/certification/fees/)A certificação FAPI – Brasil engloba não só as variações dessa certificação, mas também o teste DCR – Brasil. Dessa forma, realizando ambas as certificações em um único pedido, é necessário apenas um pagamento para a realização dos dois testes mandatórios para a Fase 2.Caso a instituição deseje realizar a certificação FAPI-CIBA ou *Relying Parties*será necessário um novo pagamento referente a uma nova certificação.Em vista do benefício de acessar custos reduzidos de certificação, pode ser de interesse de algumas instituições se associar à OpenID Foundation. A seguir, apresentamos algumas informações importantes que podem ajudar as IFs a realizar o processo de associação, caso desejado.
### 2.4.2. Associação como membro da OpenID Foundation (opcional)
Para as instituições interessadas em se associar à OpenID Foundation, os custos variam conforme o porte e característica da instituição, conforme a tabela apresentada abaixo:
### Tabela: Custos de associação à OIDF
Os custos de associação seguem a tabela da OIDF que podem ser encontrados no link abaixo: [https://openid.net/foundation/members/registration](https://openid.net/foundation/members/registration) Para se associar, a instituição deve fazer o procedimento diretamente pelo site da OpenID Foundation em: [https://openid.net/foundation/members/registration](https://openid.net/foundation/members/registration) Os benefícios de se tornar um membro, bem como demais informações, podem ser acessados em: [https://openid.net/foundation/benefits-members/](https://openid.net/foundation/benefits-members/) 
# Processo de testes e certificação

## 3.1. Pré-requisitos

### 3.1.1. Criação de conta no Sandbox do diretório de participantes
Para realizar o acesso ao motor de conformidade funcional é necessário a criação de um utilizador no Sandbox do diretório de participantes, acessível através do link abaixo: [https://web.sandbox.directory.openbankingbrasil.org.br/organisations](https://web.sandbox.directory.openbankingbrasil.org.br/organisations) É necessário estar associado a alguma organização participante no Diretório (produção ou sandbox) para acessar o motor de conformidade funcional, ou seja, é necessário ser administrador ou contato técnico de alguma instituição.O processo de criação de uma conta de usuário no Sandbox do diretório de participantes pode ser conferido através da documentação de referência do diretório, acessível em: [https://openbankingbrasil.atlassian.net/wiki/spaces/OB/pages/9634736/Guia+de+Opera+o+do+](https://openbankingbrasil.atlassian.net/wiki/spaces/OB/pages/9634736/Guia%2Bde%2BOpera%2Bo%2Bdo%2BDiret%2Brio%2BCentral) [Diret+rio+Central](https://openbankingbrasil.atlassian.net/wiki/spaces/OB/pages/9634736/Guia%2Bde%2BOpera%2Bo%2Bdo%2BDiret%2Brio%2BCentral)Diferente do motor de conformidade funcional, o motor da OIDF pode ser acessado utilizando uma conta do Google ou uma conta do GitLab.
### 3.1.2. TPP de testes e Registro do Cliente (DCR)
Para a realização dos testes de conformidade é necessário o uso de uma TPP de testes e o registro de dois Clientes na sua instituição através do processo de DCR. A instituição pode optar por utilizar uma TPP de exemplo já cadastrada no diretório ou criar a sua própria TPP seguindo as instruções do [Guia de Operações do Diretório](https://openbankingbrasil.atlassian.net/wiki/spaces/OB/pages/9634736/Guia%2Bde%2BOpera%2Bo%2Bdo%2BDiret%2Brio%2BCentral). Os dados da TPP e exemplos de configurações do motor podem ser obtidos em [https://gitlab.com/openid/conformance-suite/-/wikis/Brazil-Example-Configuration](https://gitlab.com/openid/conformance-suite/-/wikis/Brazil-Example-Configuration) .Instruções de como realizar o processo de DCR estão disponíveis no Portal do Desenvolvedor [https://openbankingbrasil.atlassian.net/wiki/spaces/OB/pages/1737964/Dynamic+Client+Registrati](https://openbankingbrasil.atlassian.net/wiki/spaces/OB/pages/1737964/Dynamic%2BClient%2BRegistration) [on](https://openbankingbrasil.atlassian.net/wiki/spaces/OB/pages/1737964/Dynamic%2BClient%2BRegistration)Nota: os certificados de transporte e assinatura utilizados na criação da TPP de testes deverão ser utilizados no preenchimento dos campos do motor de conformidade.
### 3.1.3. Exposição das APIs
Como tanto o motor de segurança da OIDF quanto o motor de conformidade funcional do Open Finance estão implementados em servidores proprietários é importante notar que os *Authorisation Servers*que serão testados devem estar expostos na Internet e com acesso configurado apenas aos certificados criados para fins de testes.Após a finalização e publicação dos testes os certificados de transporte e assinatura ficam integralmente disponibilizados para consulta, dessa forma, é importante garantir que os dois certificados sejam invalidados após sua disponibilização.O endereço IP do servidor do motor da OIDF pode ser encontrado no rodapé da página do motor de conformidade de segurança. Para o motor de conformidade funcional, no dia 25/06/2021, o endereço IP era: 194.168.4.100#53. Essa informação será disponibilizada também no rodapé da página nas versões futuras.
### 3.1.4. Geração das massas de dados
Para a realização dos testes, as instituições financeiras deverão configurar diversas massas de dados que serão objeto dos testes. Como o motor de conformidade tem o seu código fonte disponível para todo ecossistema, é possível identificar as massas de dados de referência utilizadas nos testes no seguinte diretório do motor de certificação:[https://gitlab.com/obb1/certification/-/tree/master/src/test/resources/jsonResponses](https://gitlab.com/obb1/certification/-/tree/master/src/test/resources/jsonResponses) 
### 3.1.5. Cadastro do A.S
Para se habituar ao ambiente do Diretório de Participantes a instituição pode optar por cadastrar o seu Authorisation Server em Sandbox. Esse cadastro não é necessário para a execução dos testes, podendo a instituição apenas inserir os endpoints dos seus recursos , incluindo o endpoint .well- known, diretamente nas plataformas dos testes de conformidade.Para realizar o cadastro do Authorisation Server pedimos que consulte o guia de utilização do diretório central: [https://openbankingbrasil.atlassian.net/wiki/spaces/OB/pages/9634736/Guia+de+Opera+o+do+](https://openbankingbrasil.atlassian.net/wiki/spaces/OB/pages/9634736/Guia%2Bde%2BOpera%2Bo%2Bdo%2BDiret%2Brio%2BCentral) [Diret+rio+Central](https://openbankingbrasil.atlassian.net/wiki/spaces/OB/pages/9634736/Guia%2Bde%2BOpera%2Bo%2Bdo%2BDiret%2Brio%2BCentral)
## 3.2 Funcionais

### 3.2.1 Acesso ao Motor de Conformidade Funcional
Em posse dos *endpoints*referentes ao Authorisation Server a ser testado e após a criação e configuração dos certificados necessários a próxima etapa é realizar a configuração do plano de testes no motor de conformidade funcional. O participante tem a possibilidade de realizar os testes no motor que está hospedado pelo Open Finance Brasil ou pode também fazer *download*da ferramenta para execução dos testes em ambiente local. Para obtenção do certificado consultar a sessão 3.2.3
- O link para acesso ao Motor de Conformidade Funcional online é: https://web.conformance.directory.openbankingbrasil.org.br/login.html
- O link para acessar o repositório do Motor de Conformidade Funcional para download e setup local é: https://gitlab.com/obb1/certification/

### 3.2.2. Execução dos testes
Ao realizar o acesso ao Motor de Conformidade Funcional e realizar o preenchimento dos campos necessários, é possível iniciar os testes para validação de conformidade funcional. O motor provê ao usuário resultado dos testes em tempo real e indica pontos de sucesso e pontos de falha, permitindo uma correção das implementações do participante de maneira assertiva, caso necessário. Materiais de apoio estão disponíveis em: [https://openbankingbrasil.atlassian.net/wiki/spaces/OB/pages/1738043/Diretrizes+T+cnicas+de+Ce](https://openbankingbrasil.atlassian.net/wiki/spaces/OB/pages/1738043/Diretrizes%2BT%2Bcnicas%2Bde%2BCertifica%2Bo%2Bde%2BConformidade) [rtifica+o+de+Conformidade](https://openbankingbrasil.atlassian.net/wiki/spaces/OB/pages/1738043/Diretrizes%2BT%2Bcnicas%2Bde%2BCertifica%2Bo%2Bde%2BConformidade)O participante não tem limitação do número de testes que pode executar e nem dos horários, dado que a ferramenta está disponível 24/7.Após a conclusão da bateria de testes com sucesso, o participante pode iniciar o processo de requisição do certificado de conformidade funcional.Caso a instituição deseje, como o motor de conformidade funcional está disponibilizado em formato *Open Source*, também é possível rodar os testes localmente, sem risco de exposição de dados sensíveis. É possível consultar a documentação relativa a esse processo em: [https://gitlab.com/obb1/certification/-/wikis/Running-the-conformance-suite-locally](https://gitlab.com/obb1/certification/-/wikis/Running-the-conformance-suite-locally) [https://gitlab.com/openid/conformance-suite/-/wikis/Developers/Build-&-Run](https://gitlab.com/openid/conformance-suite/-/wikis/Developers/Build-%26-Run)Com a ferramenta executando localmente, também é possível utilizá-la para fazer uma checagem dos *payloads*que estão sendo gerados pelas aplicações da instituição. Para isto, basta:
- Salvar um arquivo .json da resposta da aplicação contendo todo o payload que se deseja testar;
- Alterar o arquivo .json equivalente dentro dos arquivos do motor de conformidade: Navegar até: certification/src/test/resources/jsonResponses Encontrar o teste que deseja substituir o arquivo (account, creditCard etc); Substituir o .json do teste (Para teste account, é accountListResponse.json)
- Após realizar as substituições, basta executar o comando para refazer o build da ferramenta: mvn clean package caso esteja executando localmente sem container; docker-compose -f builder-compose.yml up caso esteja executando localmente via container
- Ao executar o comando de build da ferramenta, ela realiza testes unitários nos arquivos .json presente nas pastas. O sucesso e/ou falha destes testes será exibido em forma de output o Caso o build tenha sido executado com sucesso, o teste unitário dos arquivos .json ocorreu com sucesso ( Payloads validados); Caso haja algum erro nos arquivos, o build não será realizado

### 3.2.3. Pedido de certificação funcional
Utilizando-se do motor de conformidade funcional, o participante deverá atingir a marca de 100% de sucesso nos testes antes do pedido de certificação. Com esta marca de sucesso, o participante deve então fazer o resultado de seus testes ficar público. Um exemplo de resultado de testes publicados pode ser acessado em: [https://web.conformance.directory.openbankingbrasil.org.br/log-](https://web.conformance.directory.openbankingbrasil.org.br/log-detail.html?log=yxaJTHHQjF4to64&public=true) [detail.html?log=yxaJTHHQjF4to64&public=true](https://web.conformance.directory.openbankingbrasil.org.br/log-detail.html?log=yxaJTHHQjF4to64&public=true)É importante ressaltar que este resultado deve ser atingido no motor de conformidade funcional hospedado pelo Open Finance Brasil, logo testes executados localmente não são válidos para pedido de certificação.Para a submissão dos resultados dos testes executados pedimos que seja seguido o seguinte guia, disponibilizado atualmente em inglês: [https://gitlab.com/obb1/certification/-/wikis/Certification-Guide](https://gitlab.com/obb1/certification/-/wikis/Certification-Guide) O pedido submetido será avaliado pelo time da Raidiam/OBB e a publicação do resultado deste pedido de certificação será publicado em portal do Open Finance Brasil.Após a publicação do certificado de conformidade funcional, o participante está apto à publicação de suas APIs no ambiente de produção do Open Finance Brasil.
### 3.2.4. Status da certificação funcional
O status “CONDITIONAL PASS” pode ser emitida a critério da Estrutura de Governança quando houver uma ambiguidade potencial na especificação. Nesta situação uma instituição está retornando uma resposta divergente da maioria dos participantes do Open Finance. Um “CONDICIONAL PASS” só será emitido se a interpretação alternativa tiver pouco ou nenhum impacto nas operações de um Consumidor de Dados ou TPP. Uma instituição com um “CONDICIONAL PASS” deve enviar uma recertificação dentro de 2 semanas, demonstrando que a resposta subjacente foi tratada.O status “IN REVISION“ pode ser emitido quando a Estrutura de Governança foi informada da não conformidade com as especificações que podem afetar a interoperabilidade. As instituições com o status “IN REVISION“ serão notificadas e deverão refazer seus testes em prazo a ser estabelecido pela estrutura em função do problema de interoperabilidade.Um status “PASS*” pode ser emitido quando a Estrutura de Governança receber uma submissão técnica que está em conformidade, no entanto, a instituição requerente não forneceu comprovação precisa da documentação de conformidade. Este estado temporário está disponível apenas para envios de recertificação.O status “PASS” será emitido quando a Estrutura de Governança receber uma submissão técnica em conformidade e a instituição requerente forneceu comprovação precisa da documentação de conformidade. Os certificados no status “PASS” podem ter seu status alterado para “IN REVISION” quando um problema técnico não mapeado anteriormente for identificado e este for considerado altamente crítico para o ambiente de interoperabilidade do ecossistema.
## 3.3. Segurança

### 3.3.1. Passo-a-Passo dos Testes
Necessário executar dois testes:
- FAPI1-Advanced-Final: Authorization Server test
- FAPI1-Advanced-Final: Brazil Dynamic Client Registration Authorization server test

1. Acessar https:// www.certification.openid.net/ e realizar o login.
2. Clicar "Create a new Plan Test". No campo "Test Plan", selecionar "FAPI1-Advanced-Final: Authorization Server test" No campo "Client Authentication Type", selecionar private_key_jwt ou mtls . No campo "Request Object Method", selecione a opção da sua instituição. No campo "FAPI Profile", selecionar o openbanking_brazil . No campo "FAPI Response Mode", selecione a opção da sua instituição. Preencher os campos das seções: Test Information, Server, Client, TLS certificates for client (used to make MTLS connections), Second client, Second client TLS certificates e Resource. Após a criação do "Test Plan", vão ser exibidos todos os testes que devem ser executados. Exemplo de caso de uso de execução: https://gitlab.com/openid/conformance-suite/-/wikis/Brazil-Example-Configuration
3. Clicar "Create a new plan test". No campo "Test Plan", selecionar " FAPI1-Advanced-Final: Brazil Dynamic Client Registration Authorization server test " No campo "Client Authentication Type", selecione a opção da sua instituição. No campo "Request Object Method", selecione a opção da sua instituição. No campo "FAPI Response Mode", selecione a opção da sua instituição. Preencher os campos das seções: Test Information, Server, Client, TLS certificates for client (used to make MTLS connections), Resource e Directory. Após a criação do "Test Plan", vai ser exibido o teste a ser executado. Exemplo de como executar: https://gitlab.com/openid/conformance-suite/-/wikis/Brazil-DCR-Example-Configuration
Mais informações no site da OIDF: [https://openid.net/certification/instructions/](https://openid.net/certification/instructions/) Descrição dos campos:
- Test Plan: Selecionar alguns dos testes disponibilizados no menu Open Finance Brasil Functional Tests
- Client Authentication Type: Selecionar o tipo de autenticação de cliente compatível com seu software
- Request Object Method: O método a ser usado para passar o objeto de solicitação ao servidor de autorização. Selecione 'by_value' a menos que você saiba que seu servidor suporta o endpoint de 'solicitação de autorização enviada' ('PAR') conforme definido aqui: https://tools.ietf.org/html/draft-ietf-oauth-par
- Alias: Escrever o nome desejado para o plano de testes
- Description: Escrever a descrição desejada para o plano de testes
- Publish: Selecionar “No” para não tornar os resultados do teste público para todos
- DiscoveryUrl: Adicionar o well -know Discovery endpoint do servidor de autorização: https:xxx/.well -known/openid -configuration
- Client_id: Adicionar o client_id do software statement criado no Sandbox do diretório de participantes
- Scope: Escopos a serem usados na solicitação de autorização, por exemplo, ‘openid accounts’
- Jwks: Inserir o jwks relativo ao certificado de assinatura criado para assinar os objetos do cliente e se private_key_jwt para autenticação do cliente
- Organisation_jwks: chave BRSEAL gerado para assinatura das mensagens de pagamento. Pode ser igual ao Jwks
- Mtls.cert: Adicionar as informações do certificado de transporte BRCAC (.pem)
- Mtls.key: Adicionar a chave privada do certificado de transporte BRCAC (.key)
- http://Mtls.ca : Adicionar os certificados do Root CA do diretório e do issuer CA do diretório. Supondo que seja utilizado o PKI do diretório
- ResourceUrl: Especificar a url do recurso que será utilizado para execução dos testes. Por exemplo: https://api.edbank.com.br/openbanking/accounts/v1/accounts
- consentUrl: Especificar a url do do consentimento. Por exemplo: https://api.edbank.com.br/openbanking/consents/v1/consents
- brazilCpf: O valor 'CPF' a ser usado na solicitação de criação de consentimento.
- BrazilCnpj: O valor ‘CNPJ’ a ser usado na solicitação de criação de consentimento.
- Resource server organization id: O id da organização que provê o recurso, conforme o diretório. Deve ser preenchido quando utilizada a API de pagamentos
- Authorization server organization id: Valor do ‘organization id’ do authorization server, conforme registrado no diretório (aplicável somente para ‘scope’ que contém ‘payments’).
- Payment consent request JSON: JSON de uma solicitação de consentimento de pagamento. Será utilizado como body do request enviado ao endpoint de consentimento de pagamento (aplicável somente para ‘scope’ que contém ‘payments’).
- Payment initiation request JSON: JSON de uma solicitação de pagamento PIX. Será utilizado como body do request enviado ao endpoint de iniciação de pagamento (aplicável somente para ‘scope’ que contém ‘payments’).
- Discovery Endpoint: URL para o diretório OpenBanking. Por exemplo: https://auth.sandbox.directory.openbankingbrasil.org.br/.well-known/openid-configuration
- Directory ClientID: client_id para este cliente no OpenBanking Directory. É empregado para obter um token de acesso para recuperar a Software Statements.
- Directory API base: URL base para o OpenBanking Directory Sandbox.Por exemplo: https://matls-api.sandbox.directory.openbankingbrasil.org.br/
- Directory keystore base: O caminho para o keystore do diretório. Para sandbox usar " https://keystore.sandbox.directory.openbankingbrasil.org.br/
- https://openid.net/2021/04/14/guest-blog-financial-grade-api-fapi-explained-by-an- implementer-updated/
- https://gitlab.com/openid/conformance-suite/-/wikis/home
- https://openid.net/certification/fapi_op_testing/
A OIDF também disponibiliza na sua plataforma o teste FAPI - RP (*Relying Parties)*que permite o teste das receptoras de dados (ou Iniciadores de Transação de Pagamento). A execução dos testes é mandatória para receptoras da Fase 2 e iniciadoras de transação de pagamento da Fase 3.Mais detalhes sobre os testes de RP podem ser encontrados em: [https://openid.net/certification/fapi_rp_testing/](https://openid.net/certification/fapi_rp_testing/) Em caso de dúvidas ou problemas na execução dos testes, favor consultar o item 4.3: Suporte – Motor de Segurança
### 3.3.2. Pedido de certificação de segurança
Para realizar o pedido de certificação de segurança junto a OIDF o participante deverá consultar as instruções contidas no endereço: [https://openid.net/certification/op_submission/](https://openid.net/certification/op_submission/) 
### 3.3.2 Documentação adicional OIDF
Além das especificações dos perfis FAPI, citadas no final desse Guia, a OIDF também recomenda a consulta do artigo, “FAPI explicada por um desenvolvedor”, para as instituições que buscam a certificação FAPI. Esse artigo pode ser acessa pelo seguinte link:[FAPI Explicada por um desenvolvedor](https://openid.net/financial-grade-api-fapi-explicada-por-um-desenvolvedor/)
# Suporte

## 4.1. Glossário
**Open ID Foundation (OIDF):***A OpenID Foundation é uma organização internacional sem fins lucrativos, voltada para desenvolvedores e empresas. Tem como objetivo auxiliar a comunidade fornecendo a infraestrutura necessária e ajuda a promover e apoiar a adoção ampliada do OpenID.***Motor de Conformidade de Segurança:***Ferramenta disponibilizada pela Open ID Foundation que implementa o perfil de segurança do Open Finance Brasil. Através desta plataforma é possível a validação da camada de segurança das aplicações da Instituição Participante.***Motor de Conformidade Funcional:***Ferramenta disponibilizada pela Estrutura de Governança para realização de testes de conformidade de especificações de API da Instituição Participante.***Implementação de Referência:***Implementação de exemplo das APIs do Open Finance Brasil, simulando uma Instituição Participante de Referência*.**Estrutura de Governança:***Estrutura responsável pela governança do processo de implementação no País do Sistema Financeiro Aberto (Open Finance).***Instituições Participantes:***Todas as instituições autorizadas a funcionar pelo Banco Central do Brasil e que se cadastram para participar do Open Finance Brasil, conforme regulamento vigente.***Diretório:***O Diretório de Participantes é o ambiente no qual uma instituição autorizada a funcionar pelo Banco Central do Brasil formaliza sua participação no ambiente do Open Finance,***Sandbox do Diretório:*****O Sandbox do Diretório de Participantes é uma implementação cópia do diretório de participantes para a realização de testes. Esse ambiente possui uma base de dados e PKI completamente independente do Diretório produtivo*****Relying Parties (RP):***Termo em inglês que se refere a aplicação que interagem com os servidores de autorização das instituições financeiras. No Escopo do Open Finance estamos falando das receptoras de dados para a Fase 2 e das iniciadoras de pagamentos para a Fase 3***FAPI (Financial-grade API):***Especificação técnica de API e define requisitos técnicos adicionais para o setor financeiro***Dynamic Client Registration (DCR):***O Perfil de Registro de Cliente Dinâmico de Financal-grade API (FAPI) do Open Finance Brasil é um perfil que visa fornecer diretrizes de implementação específicas para segurança e interoperabilidade que podem ser aplicadas à identificação, registro e gerenciamento de Clientes OAuth operando no ecossistema Brasil Open Finance.***CIBA (Client Initiated Backchannel Authentication):***A autenticação de backchannel iniciada pelo cliente (CIBA) é um dos padrões mais recentes da OpenID Foundation. São categorizados como "fluxo desacoplado" e permite novas maneiras de obter o consentimento do usuário final*Canais para DúvidasPara suportar as instituições em caso de dúvidas sobre o processo de certificação o Open Finance Brasil dispõe de FAQ e de uma equipe de *service desk*responsável por solucionar problemas obtidos durante a utilização tanto da ferramenta da OpenID Foundation quanto para a ferramenta para testes funcionais do OBB.
## 4.2. Service Desk
A equipe de suporte do processo de conformidade utiliza a mesma infraestrutura do Service Desk do Open Finance, acessível através do link: [https://servicedesk.openbankingbrasil.org.br/Login.jsp](https://servicedesk.openbankingbrasil.org.br/Login.jsp) A abertura de chamados pode ser realizada tanto pelos usuários logados, atrelados a alguma instituição financeira, quanto para usuários não logados. O processo para abertura de um chamado de um usuário logado pode ser conferido através do tutorial em vídeo, abaixo: [https://youtu.be/bhMOtliGjKc](https://youtu.be/bhMOtliGjKc) A equipe de suporte do processo de conformidade está disponível para solucionar questões relacionados a:
- Dúvidas gerais relacionadas a política de certificação
- Suportar na abertura e acompanhamento do pedido de certificação
- Interpretação de erros encontrados no log de testes
- Configuração dos planos de testes nas plataformas de certificação
- Documentação relativa ao processo de certificação
A equipe de suporte não tem irá fornecer suporte técnico relacionado à como o participante deve construir sua implementação do Open Finance.Dentro da plataforma os chamados podem ser abertos em uma série de categorias diferentes. Para dúvidas, questões e problemas relativas ao motor de conformidade temos a seguinte lista de categorias que podem ser utilizadas:
- Incidentes -> Conformidade APIs: Problemas causados por ambiguidade ou inconsistências nas especificações das APIs Motor de Conformidade: Problemas na criação, execução e divergência com especificações nas plataformas da OIDF e do Open Finance
- Solicitação de Informações -> Conformidade APIs: Interpretação e questões relativas as especificações das APIs Motor de Conformidade: Dúvidas com criação, execução e interpretação dos resultados dos testes Política de certificação: Questionamentos sobre prazos, regulação e custeio
- Enviar pedido de certificação Comentado no item “Submissão de certificados”, no menu acima
A equipe de atendimento do motor de conformidade está disponível 8x5, ou seja, oito horas por dia apenas em dias úteis F.A.Q.Também é disponibilizado um FAQ relativo à política de certificação que pode ser consultado em: [https://openbanking-brasil.github.io/areadesenvolvedor/#faq-testes-e-homologacao](https://openbanking-brasil.github.io/areadesenvolvedor/#faq-testes-e-homologacao) Pedimos que os participantes, antes de abrirem um chamado, consultem se a sua dúvida não está contemplada dentro do FAQ de certificação.
## 4.3. Suporte – Motor de conformidade de Segurança
Em caso de dúvidas sobre a execução dos testes de conformidade de segurança pedimos que entrem em contato pelo email [certificate@oidf.org.](mailto:certificate@oidf.org)Para relatar possíveis bugs ou alterações necessárias, pedimos que sejam abertos tickets em [https://gitlab.com/openid/conformance-suite/-/issues/new](https://gitlab.com/openid/conformance-suite/-/issues/new)
## 4.4. Especificações
As especificações referentes ao Open Finance podem ser encontradas em sua integralidade no portal do Desenvolver, acessível através do Link: [https://openbankingbrasil.atlassian.net/wiki/spaces/OB/pages/8683521/Especifica+es+de+APIs](https://openbankingbrasil.atlassian.net/wiki/spaces/OB/pages/8683521/Especifica%2Bes%2Bde%2BAPIs)
## Links de Apoio
FAPI Especificações:[https://openid.net/specs/openid-financial-api-part-2-1_0-final.html](https://openid.net/specs/openid-financial-api-part-2-1_0-final.html) FAPI Motor de testes e certificação:[How to run conformance tests for FAPI-RW OPs](https://openid.net/certification/fapi_op_testing/)[How to request certification after successfully completing conformance testing for FAPI-RW and](https://openid.net/certification/op_submission/) [FAPI-CIBA OPs](https://openid.net/certification/op_submission/)[Financial-grade API (FAPI), Explained by an Implementer – Updated](https://openid.net/2021/04/14/guest-blog-financial-grade-api-fapi-explained-by-an-implementer-updated/)[FAPI Explicada por um desenvolvedor](https://openid.net/financial-grade-api-fapi-explicada-por-um-desenvolvedor/)Service Desk:
[https://servicedesk.openbankingbrasil.org.br/index.jsp#/Dashboard.jsp](https://servicedesk.openbankingbrasil.org.br/index.jsp%23/Dashboard.jsp)FAQ – Testes e homologação: [https://openbankingbrasil.atlassian.net/wiki/spaces/OB/pages/1639437/FAQ+-+Testes+e+Homologa+o](https://openbankingbrasil.atlassian.net/wiki/spaces/OB/pages/1639437/FAQ%2B-%2BTestes%2Be%2BHomologa%2Bo)Diretório de Participantes e Sandbox:[https://web.directory.openbankingbrasil.org.br/](https://web.directory.openbankingbrasil.org.br/) [https://web.sandbox.directory.openbankingbrasil.org.br](https://web.sandbox.directory.openbankingbrasil.org.br/)Motores de conformidade:[https://web.conformance.directory.openbankingbrasil.org.br/login.html](https://web.conformance.directory.openbankingbrasil.org.br/login.html)[https://www.certification.openid.net/login.html](https://www.certification.openid.net/login.html) Repositórios dos motores de conformidade: [https://gitlab.com/obb1/certification](https://gitlab.com/obb1/certification) [https://gitlab.com/openid/conformance-suite/-/wikis/home](https://gitlab.com/openid/conformance-suite/-/wikis/home) Materiais complementares:[https://openbankingbrasil.atlassian.net/wiki/spaces/OB/pages/1738043/Diretrizes+T+cnicas+de+Certifica+o+de+Conformidade](https://openbankingbrasil.atlassian.net/wiki/spaces/OB/pages/1738043/Diretrizes%2BT%2Bcnicas%2Bde%2BCertifica%2Bo%2Bde%2BConformidade)